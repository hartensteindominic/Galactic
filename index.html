<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vault Sync â€¢ Live</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.13.2/ethers.umd.min.js"></script>
  <style>
    :root { --neon: #00ffcc; --bg: #050510; }
    body { background: var(--bg); color: #fff; font-family: sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
    .container { background: #111125; padding: 2rem; border-radius: 15px; border: 1px solid #222244; width: 350px; text-align: center; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
    h1 { color: var(--neon); font-size: 1.8rem; margin-top: 0; }
    .price-box { background: #000; padding: 10px; border-radius: 8px; margin: 15px 0; border: 1px solid #333; }
    #price { color: #0f0; font-weight: bold; }
    input { width: 90%; padding: 10px; margin: 10px 0; background: #050510; border: 1px solid #444; color: #fff; border-radius: 5px; }
    button { width: 100%; padding: 12px; margin: 5px 0; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; transition: 0.3s; }
    .btn-main { background: var(--neon); color: #000; }
    .btn-sec { background: #222244; color: #fff; }
    #log { font-family: monospace; font-size: 0.75rem; color: #888; text-align: left; height: 80px; overflow-y: auto; background: #000; padding: 10px; margin-top: 15px; border-radius: 5px; }
  </style>
</head>
<body>

<div class="container">
  <h1>VAULT SYNC</h1>
  <div class="price-box">ETH/USD: <span id="price">---</span></div>
  
  <input type="text" id="target" placeholder="Recipient: 0x...">
  <input type="number" id="amt" value="0.01" step="0.01">

  <button class="btn-main" onclick="startSync()">CONNECT & SYNC</button>
  <button class="btn-sec" onclick="toggleBot()">ACTIVATE BOT</button>

  <div id="log">System: Ready</div>
</div>

<script>
  const logger = document.getElementById('log');
  function log(m) { logger.innerHTML += `<div>> ${m}</div>`; logger.scrollTop = logger.scrollHeight; }

  // 1. Live Price
  async function getPrice() {
    try {
      const r = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd');
      const d = await r.json();
      document.getElementById('price').innerText = '$' + d.ethereum.usd;
    } catch(e) { document.getElementById('price').innerText = 'Connection Error'; }
  }
  setInterval(getPrice, 10000); getPrice();

  // 2. Real MetaMask Transaction
  async function startSync() {
    if (!window.ethereum) return log("MetaMask not found!");
    
    try {
      const provider = new ethers.BrowserProvider(window.ethereum);
      const signer = await provider.getSigner();
      const addr = await signer.getAddress();
      log("Connected: " + addr.slice(0,6));

      const txAmt = ethers.parseEther(document.getElementById('amt').value);
      const target = document.getElementById('target').value;
      
      if(!ethers.isAddress(target)) return log("Invalid Address", true);

      log("Sending Sync Transaction...");
      const tx = await signer.sendTransaction({
        to: target,
        value: txAmt
      });
      log("Pending: " + tx.hash.slice(0,10));
      await tx.wait();
      log("Sync Successful!");
    } catch(e) { log("Error: " + e.message.slice(0,30)); }
  }

  function toggleBot() { log("Bot monitoring local node..."); }
</script>

</body>
</html>
