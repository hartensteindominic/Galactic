<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AURUM SENTINEL // SOVEREIGN_V36</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/ethers.umd.min.js"></script>
    <style>
        body { margin: 0; background: #000; color: #FFD700; font-family: 'Courier New', monospace; overflow-x: hidden; }
        .glass { background: rgba(0,0,0,0.95); border: 1px solid #FFD700; backdrop-filter: blur(20px); }
        .neon-text { text-shadow: 0 0 10px #FFD700; }
        .vault-btn { width: 100%; padding: 12px; font-weight: 900; font-size: 11px; cursor: pointer; border: 1px solid #FFD700; transition: 0.2s; text-transform: uppercase; }
        .vault-btn:hover { background: #FFD700; color: black; box-shadow: 0 0 20px #FFD700; }
        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">

<div class="fixed top-0 w-full glass p-6 border-b border-[#FFD700] z-50 flex justify-between items-center">
    <div>
        <h1 class="font-black tracking-tighter text-xl neon-text">AURUM_SENTINEL_V36</h1>
        <div class="text-[9px] opacity-60 flex gap-3">
            <span>STATUS: <span class="text-green-400 animate-pulse">SECURE_ON_CHAIN</span></span>
            <span>VERIFIED: <a href="https://etherscan.io/address/0xae7ab96520DE3A18E5e111B5EaAb095312D7fE84" target="_blank" class="underline">LIDO_V3_CORE</a></span>
        </div>
    </div>
    <div class="text-right">
        <div id="wallet-status" class="text-[10px] text-white/50 mb-1">NOT_CONNECTED</div>
        <button id="connect-btn" onclick="connectWallet()" class="bg-white text-black px-4 py-1 text-[10px] font-bold hover:bg-[#FFD700]">CONNECT_WALLET</button>
    </div>
</div>

<main class="w-full max-w-md glass p-8 mt-20 relative border-t-4 border-[#FFD700]">
    <div id="ai-voice" class="text-[11px] italic mb-6 text-cyan-400 h-8">"Connecting to the Ethereum validator pool... Stand by."</div>

    <div class="grid grid-cols-2 gap-4 mb-8">
        <div class="border-l-2 border-white/20 pl-3">
            <span class="text-[8px] block opacity-40">AVAILABLE_ETH</span>
            <span id="eth-bal" class="text-lg font-bold">0.0000</span>
        </div>
        <div class="border-l-2 border-[#FFD700] pl-3">
            <span class="text-[8px] block opacity-40">STAKED_stETH</span>
            <span id="steth-bal" class="text-lg font-bold text-[#FFD700]">0.0000</span>
        </div>
    </div>

    <div class="space-y-4">
        <div>
            <label class="text-[9px] block mb-2 opacity-50 uppercase">Input Deposit Amount</label>
            <input id="stake-input" type="number" step="0.01" placeholder="0.00 ETH" class="w-full bg-black border border-white/10 p-4 text-white font-bold outline-none focus:border-[#FFD700]">
        </div>
        
        <button onclick="stakeEth()" class="vault-btn bg-[#FFD700] text-black">Deposit into Lido Pool</button>
        
        <div class="pt-6 border-t border-white/5 mt-4">
            <button onclick="withdrawBridge()" class="vault-btn bg-black text-[#FFD700] border-[#FFD700]">Bridge/Withdraw (0.0001 Fee)</button>
            <p class="text-[7px] mt-4 opacity-30 text-center uppercase tracking-widest">Only you hold the keys. Your funds remain in the stETH contract.</p>
        </div>
    </div>
</main>

<div class="mt-8 text-[8px] text-white/20 uppercase tracking-[0.3em] text-center">
    Non-Custodial Architecture // Verified Smart Contract // Aurum Sentinel Â© 2026
</div>

<script>
    const CONFIG = {
        LIDO_ADDRESS: "0xae7ab96520DE3A18E5e111B5EaAb095312D7fE84",
        TREASURY: "0x13B87B819252A81381C3Ce35e3Bd33199F4c6650",
        INTERFACE_FEE: "0.0001"
    };

    let signer = null;
    let provider = null;

    const UI = {
        update: (id, text) => document.getElementById(id).innerText = text,
        speak: (t) => {
            document.getElementById('ai-voice').innerText = `"${t}"`;
            const m = new SpeechSynthesisUtterance(t);
            m.pitch = 0.5; m.rate = 0.9;
            window.speechSynthesis.speak(m);
        }
    };

    async function connectWallet() {
        if (!window.ethereum) return UI.speak("No wallet detected. Install MetaMask.");
        provider = new ethers.BrowserProvider(window.ethereum);
        const accounts = await provider.send("eth_requestAccounts", []);
        signer = await provider.getSigner();
        UI.update('wallet-status', `CONNECTED: ${accounts[0].slice(0,6)}...${accounts[0].slice(-4)}`);
        document.getElementById('connect-btn').style.display = 'none';
        refreshBalances();
    }

    async function refreshBalances() {
        if (!signer) return;
        const addr = await signer.getAddress();
        
        // 1. Get ETH
        const ethWei = await provider.getBalance(addr);
        UI.update('eth-bal', parseFloat(ethers.formatUnits(ethWei, "ether")).toFixed(4));

        // 2. Get stETH (ERC20)
        const abi = ["function balanceOf(address) view returns (uint256)"];
        const contract = new ethers.Contract(CONFIG.LIDO_ADDRESS, abi, provider);
        const stEthWei = await contract.balanceOf(addr);
        UI.update('steth-bal', parseFloat(ethers.formatUnits(stEthWei, "ether")).toFixed(5));
    }

    async function stakeEth() {
        if (!signer) return connectWallet();
        const amt = document.getElementById('stake-input').value;
        if (!amt || amt <= 0) return UI.speak("Specify a tribute amount.");

        try {
            UI.speak("Establishing secure link to Lido. Sign the transaction.");
            // Lido V3 submit() with referral
            const lidoAbi = ["function submit(address _referral) payable returns (uint256)"];
            const contract = new ethers.Contract(CONFIG.LIDO_ADDRESS, lidoAbi, signer);
            
            const tx = await contract.submit(CONFIG.TREASURY, {
                value: ethers.parseEther(amt)
            });
            await tx.wait();
            UI.speak("Tribute accepted. Your yield begins now.");
            refreshBalances();
        } catch (e) { UI.speak("Transaction aborted by user or network."); }
    }

    async function withdrawBridge() {
        if (!signer) return connectWallet();
        try {
            UI.speak("Processing interface tax for Solana bridge activation.");
            const tx = await signer.sendTransaction({
                to: CONFIG.TREASURY,
                value: ethers.parseEther(CONFIG.INTERFACE_FEE)
            });
            await tx.wait();
            UI.speak("Tax paid. Redirecting to sovereign swap gateway.");
            setTimeout(() => window.location.href = "https://raydium.io/swap/", 2000);
        } catch (e) { UI.speak("The Treasury demands its due. Transaction failed."); }
    }

    // Auto-refresh every 30s
    setInterval(refreshBalances, 30000);
</script>
</body>
</html>
