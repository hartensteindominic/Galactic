<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Alien Frontier: Survivor</title>
  <style>
    :root { color-scheme: dark; font-family: Inter, system-ui, sans-serif; }
    html, body { margin: 0; width: 100%; height: 100%; overflow: hidden; background: #030712; }
    #hud {
      position: fixed;
      top: 12px;
      left: 12px;
      z-index: 2;
      background: rgba(5, 10, 22, 0.72);
      border: 1px solid rgba(91, 223, 255, 0.35);
      border-radius: 12px;
      padding: 10px 14px;
      min-width: 250px;
      backdrop-filter: blur(8px);
      color: #d8f7ff;
      font-size: 0.9rem;
    }
    #hud p, #hud h1 { margin: 4px 0; }
    #hud h1 { margin-bottom: 7px; color: #9defff; font-size: 1rem; }
    #message {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 14px;
      text-align: center;
      color: #d7f5ff;
      z-index: 3;
      font-size: 0.92rem;
      text-shadow: 0 0 8px rgba(29, 196, 255, 0.45);
    }
    canvas { display: block; width: 100vw; height: 100vh; cursor: crosshair; }
  </style>
</head>
<body>
  <div id="hud">
    <h1>Alien Frontier</h1>
    <p><strong>Move:</strong> W A S D | <strong>Shoot:</strong> Left Click</p>
    <p><strong>Eliminate all drones and survive.</strong></p>
    <p><strong>HP:</strong> <span id="hp">100</span></p>
    <p><strong>Drones destroyed:</strong> <span id="score">0</span>/<span id="total">0</span></p>
  </div>
  <p id="message">Game loaded. Move with WASD and click to shoot.</p>
  <canvas id="game"></canvas>

  <script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    const hpEl = document.getElementById('hp');
    const scoreEl = document.getElementById('score');
    const totalEl = document.getElementById('total');
    const messageEl = document.getElementById('message');

    function resize() {
      canvas.width = innerWidth;
      canvas.height = innerHeight;
    }
    addEventListener('resize', resize);
    resize();

    const keys = new Set();
    addEventListener('keydown', (e) => keys.add(e.code));
    addEventListener('keyup', (e) => keys.delete(e.code));

    const player = { x: canvas.width / 2, y: canvas.height / 2, r: 16, hp: 100, speed: 240 };
    const bullets = [];
    const enemies = [];
    const particles = [];
    const mouse = { x: canvas.width / 2, y: canvas.height / 2 };

    const enemyCount = 10;
    totalEl.textContent = enemyCount;
    let score = 0;
    let gameOver = false;

    function rand(min, max) {
      return Math.random() * (max - min) + min;
    }

    function spawnEnemy() {
      const side = Math.floor(Math.random() * 4);
      let x = 0;
      let y = 0;
      if (side === 0) { x = rand(0, canvas.width); y = -30; }
      if (side === 1) { x = canvas.width + 30; y = rand(0, canvas.height); }
      if (side === 2) { x = rand(0, canvas.width); y = canvas.height + 30; }
      if (side === 3) { x = -30; y = rand(0, canvas.height); }
      enemies.push({ x, y, r: 14, speed: rand(45, 82), hp: 1 });
    }

    for (let i = 0; i < enemyCount; i++) spawnEnemy();

    canvas.addEventListener('mousemove', (e) => {
      mouse.x = e.clientX;
      mouse.y = e.clientY;
    });

    canvas.addEventListener('mousedown', (e) => {
      if (e.button !== 0 || gameOver) return;
      const angle = Math.atan2(mouse.y - player.y, mouse.x - player.x);
      bullets.push({
        x: player.x,
        y: player.y,
        vx: Math.cos(angle) * 520,
        vy: Math.sin(angle) * 520,
        life: 1.1,
        r: 4
      });
    });

    function update(dt) {
      if (gameOver) return;

      let dx = 0;
      let dy = 0;
      if (keys.has('KeyW')) dy -= 1;
      if (keys.has('KeyS')) dy += 1;
      if (keys.has('KeyA')) dx -= 1;
      if (keys.has('KeyD')) dx += 1;
      if (dx !== 0 || dy !== 0) {
        const mag = Math.hypot(dx, dy);
        player.x += (dx / mag) * player.speed * dt;
        player.y += (dy / mag) * player.speed * dt;
      }

      player.x = Math.max(player.r, Math.min(canvas.width - player.r, player.x));
      player.y = Math.max(player.r, Math.min(canvas.height - player.r, player.y));

      for (let i = bullets.length - 1; i >= 0; i--) {
        const b = bullets[i];
        b.x += b.vx * dt;
        b.y += b.vy * dt;
        b.life -= dt;
        if (b.life <= 0 || b.x < -20 || b.x > canvas.width + 20 || b.y < -20 || b.y > canvas.height + 20) {
          bullets.splice(i, 1);
        }
      }

      for (let i = enemies.length - 1; i >= 0; i--) {
        const enemy = enemies[i];
        const ex = player.x - enemy.x;
        const ey = player.y - enemy.y;
        const dist = Math.hypot(ex, ey) || 1;
        enemy.x += (ex / dist) * enemy.speed * dt;
        enemy.y += (ey / dist) * enemy.speed * dt;

        if (dist < player.r + enemy.r) {
          player.hp = Math.max(0, player.hp - 25 * dt);
          hpEl.textContent = Math.ceil(player.hp);
          if (player.hp <= 0) {
            gameOver = true;
            messageEl.textContent = 'You were overrun. Refresh to try again.';
          }
        }

        for (let j = bullets.length - 1; j >= 0; j--) {
          const b = bullets[j];
          const hitDist = Math.hypot(b.x - enemy.x, b.y - enemy.y);
          if (hitDist < b.r + enemy.r) {
            bullets.splice(j, 1);
            enemies.splice(i, 1);
            score += 1;
            scoreEl.textContent = score;
            for (let p = 0; p < 8; p++) {
              particles.push({ x: enemy.x, y: enemy.y, vx: rand(-70, 70), vy: rand(-70, 70), life: rand(0.2, 0.5) });
            }
            break;
          }
        }
      }

      for (let i = particles.length - 1; i >= 0; i--) {
        const p = particles[i];
        p.x += p.vx * dt;
        p.y += p.vy * dt;
        p.life -= dt;
        if (p.life <= 0) particles.splice(i, 1);
      }

      if (!gameOver && score === enemyCount) {
        gameOver = true;
        messageEl.textContent = 'All drones neutralized. Great run! Refresh to play again.';
      }
    }

    function draw() {
      ctx.fillStyle = '#050915';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      for (let i = 0; i < 140; i++) {
        const x = (i * 97) % canvas.width;
        const y = (i * 57) % canvas.height;
        ctx.fillStyle = 'rgba(145,214,255,0.08)';
        ctx.fillRect(x, y, 2, 2);
      }

      for (const enemy of enemies) {
        ctx.fillStyle = '#74ff8a';
        ctx.beginPath();
        ctx.arc(enemy.x, enemy.y, enemy.r, 0, Math.PI * 2);
        ctx.fill();
      }

      ctx.fillStyle = '#92e8ff';
      ctx.beginPath();
      ctx.arc(player.x, player.y, player.r, 0, Math.PI * 2);
      ctx.fill();

      for (const b of bullets) {
        ctx.fillStyle = '#d8f9ff';
        ctx.beginPath();
        ctx.arc(b.x, b.y, b.r, 0, Math.PI * 2);
        ctx.fill();
      }

      for (const p of particles) {
        ctx.fillStyle = 'rgba(140,255,180,0.65)';
        ctx.fillRect(p.x, p.y, 3, 3);
      }

      ctx.strokeStyle = 'rgba(194,247,255,0.75)';
      ctx.beginPath();
      ctx.arc(mouse.x, mouse.y, 10, 0, Math.PI * 2);
      ctx.stroke();
    }

    let last = performance.now();
    function loop(now) {
      const dt = Math.min((now - last) / 1000, 0.033);
      last = now;
      update(dt);
      draw();
      requestAnimationFrame(loop);
    }

    requestAnimationFrame(loop);
  </script>
</body>
</html>
