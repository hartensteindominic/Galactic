<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Grok Audible Sentinel</title>
    <style>
        :root { --neon: #00f2ff; --bg: #000; }
        body { background: var(--bg); color: #444; font-family: 'Courier New', monospace; margin: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; }
        
        /* The Visual Core */
        #core { width: 150px; height: 150px; border-radius: 50%; border: 2px solid #222; overflow: hidden; margin-bottom: 20px; transition: 0.3s; }
        video { width: 100%; height: 100%; object-fit: cover; filter: brightness(0.5) grayscale(1); }

        /* Audio HUD */
        #audio-status { font-size: 0.7rem; color: var(--neon); letter-spacing: 2px; margin-bottom: 20px; }
        .btn { background: transparent; border: 1px solid var(--neon); color: var(--neon); padding: 15px 30px; cursor: pointer; font-weight: bold; }
        .pulse { box-shadow: 0 0 30px var(--neon); border-color: var(--neon) !important; }
    </style>
</head>
<body>

<div id="core">
    <video id="webcam" autoplay playsinline muted></video>
</div>

<div id="audio-status">AUDIO: STANDBY (WAITING FOR USER)</div>

<button id="startBtn" class="btn">ACTIVATE VOICE & VISION</button>

<script>
    const video = document.getElementById('webcam');
    const status = document.getElementById('audio-status');
    const core = document.getElementById('core');

    // 1. FORCED SPEECH INITIALIZATION
    function forceWakeSpeech() {
        const msg = new SpeechSynthesisUtterance("Speech system synchronized.");
        msg.volume = 1;
        msg.rate = 1;
        msg.pitch = 0.8;
        window.speechSynthesis.speak(msg);
    }

    async function init() {
        try {
            // Start Camera
            const stream = await navigator.mediaDevices.getUserMedia({ video: true });
            video.srcObject = stream;
            
            // Start Speech
            forceWakeSpeech();
            
            status.innerText = "AUDIO: SYNCHRONIZED";
            core.classList.add('pulse');
            document.getElementById('startBtn').style.display = 'none';

            // Loop to check if Grok should talk
            setInterval(() => {
                if(window.speechSynthesis.speaking) {
                    status.innerText = "AUDIO: TRANSMITTING...";
                } else {
                    status.innerText = "AUDIO: LISTENING...";
                }
            }, 1000);

        } catch (e) {
            status.innerText = "ERROR: SYSTEM BLOCKED";
            status.style.color = "red";
        }
    }

    document.getElementById('startBtn').onclick = init;
</script>
</body>
</html>
